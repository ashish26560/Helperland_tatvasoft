@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    @using Microsoft.AspNetCore.Http;
    @using Microsoft.AspNetCore.Session;
}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
          rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">

    <!-- <link rel="stylesheet" href="bootstrap-5.1.3-dist/css/bootstrap.css"> -->
    <link href="~/css/site.css" rel="stylesheet" />

</head>

<body>
    <div class="container-fluid admin">
        <section id="admin">
            <div class=" row admin-header">
                <div class="col-auto">
                    <img src="~/assets/admin-logo.png" alt="Helperland">
                </div>
                <div class="col-auto">
                    <a href="#" class="name"><img src="~/assets/admin-user.png" alt="Name">@Context.Session.GetString("Name")</a>
                    <a asp-controller="Home" asp-action="Logout"><img src="~/assets/icon-logout.png" alt="Logout"></a>

                </div>
            </div>

        </section>
        <section id="admin-section2">
            <div class="row row1">
                <div class="col-auto col1 ">
                    <ul class="nav nav-tabs flex-column" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" onclick="loadservicerequest()" data-bs-toggle="tab" href="#servicerequest">Service Request</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" onclick="loadusermanagement()" href="#usermanagement">User Management</a>
                        </li>
                    </ul>

                </div>
                <div class="col-auto col2">


                    <div class="tab-content">
                        <div id="servicerequest" class=" tab-pane active">
                            <div id="servreqsearch">

                            </div>
                            <div id="servreqtable">

                            </div>
                        </div>
                        <div id="usermanagement" class=" tab-pane fade">
                            <div id="usrmanagesearch">

                            </div>
                            <div id="usrmanagetable">

                            </div>
                        </div>

                        <p>
                            ©2018 Helperland. All rights reserved.

                        </p>

                    </div>

                </div>

            </div>

        </section>
        <section id="editreschedulemodal"></section>
    </div>
    <script>
         $(document).ready(function() {
             $("#servreqtable").load("@Url.Action("SearchRequest", "Admin")");
             $("#servreqsearch").load("@Url.Action("ServiceRequestSearch", "Admin")");

         });
        function getcityname() {
            var id = $("#postalcode").val();
            $.ajax({
                url: "/Admin/GetCityName",
                type: 'POST',
                contenttype: 'application/json',
                data: { "id": id },
                success: function (response) {
                    if (response == "NotFound") {
                        $("#invalidpostalcode").show('fade');
                        $("#invalidpostalcode").fadeTo(2000, 500).slideUp(500, function () {
                            $("#invalidpostalcode").slideUp(500);
                        });
                    } else {

                        $("#selectcity").html("");
                        $("#selectcity").html('<option value="' + response + '" selected>' + response + '</option>');

                    }
                }
            });
        }
        function openmodal(sr) {
            var id = sr.getAttribute("data-id");
            var prompt = sr.getAttribute("data-prompt");

            if (prompt == 1) {
                $.ajax({
                    url: "/Admin/EditAndRescheduleModal",
                    type: 'POST',
                    contenttype: 'application/json',
                    data: { "id": id },
                    success: function (response) {
                        $("#editreschedulemodal").html(response);
                        $("#edit-and-reschedule").modal("show");
                    }
                });
            }
            if (prompt == 2) {
                $.ajax({
                    url: "/Admin/CancelRequest",
                    type: 'POST',
                    contenttype: 'application/json',
                    data: { "id": id },
                    //success: function (response) {
                    //    $("#editreschedulemodal").html(response);
                    //    $("#edit-and-reschedule").modal("show");
                    //}
                });
            }
        }
        function notfound(data) {
            var temp = JSON.parse(data.responseText);
            $("#response").html(temp.message);

            $("#response").show('fade');
            $("#response").fadeTo(2000, 500).slideUp(500, function () {
                $("#response").slideUp(500);
            });
        }
        function notfounduser(data) {
            var temp = JSON.parse(data.responseText);
            $("#responseuser").html(temp.message);

            $("#responseuser").show('fade');
            $("#responseuser").fadeTo(2000, 500).slideUp(500, function () {
                $("#responseuser").slideUp(500);
            });
        }
        function loadservicerequest(){
            $("#servreqtable").load("@Url.Action("SearchRequest", "Admin")");
            $("#servreqsearch").load("@Url.Action("ServiceRequestSearch", "Admin")");
        }
        function loadusermanagement() {
            $("#usrmanagetable").load("@Url.Action("SearchUserRequest", "Admin")");
            $("#usrmanagesearch").load("@Url.Action("UserManagementSearch", "Admin")");
        }
    </script>
    <script src="~/lib/jquery-validate/jquery.validate.js"></script>
    <script src="~/lib/jquery-ajax-unobtrusive/jquery.unobtrusive-ajax.js"></script>

    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"></script>
    <script src="~/js/site.js"></script>
</body>

</html>