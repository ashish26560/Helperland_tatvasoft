@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@
@model cloudscribe.Pagination.Models.PagedResult<ServiceRequest>



<table class="table">
    <thead>

        <tr>
            <th>Service ID</th>
            <th>Service date </th>
            <th>customer details</th>
            <th>Service Provider</th>
            <th>Amount</th>
            <th>status</th>
            <th>Actions</th>

        </tr>
    </thead>

    @if (Model != null)
    {
        <tbody>

            @foreach (ServiceRequest serviceRequest in Model.Data)
            {
                var serviceDateTime = serviceRequest.ServiceStartDate;
                var startdate = serviceDateTime.ToString("d").Replace("-", "/");
                var starttime = serviceDateTime.ToString("t");

                var finishtime = serviceDateTime.AddHours(serviceRequest.ServiceHours).ToString("t");
                <tr>
                    <td class="serviceid">@serviceRequest.ServiceRequestId</td>
                    <td>
                        <ul class="servicedate">
                            <li class="date">@startdate</li>
                            <li class="time">@starttime-@finishtime</li>
                        </ul>
                    </td>
                    <td>
                        @serviceRequest.CustomerName
                        <ul class="customerdetails">
                            <li class="address">@serviceRequest.ServiceAddress</li>
                        </ul>
                    </td>
                    <td>
                        <div class="row cap-1">
                            @if (serviceRequest.ServiceProviderName != null)
                            {

                                <div class="col-auto cap-2">
                                    @if (serviceRequest.UserProfilePicture == "1")
                                    {

                                        <img class="avatar" style="float: right;" src="~/assets/avatar-car.png">
                                    }
                                    @if (serviceRequest.UserProfilePicture == "2")
                                    {

                                        <img class="avatar" style="float: right;" src="~/assets/avatar-female.png">
                                    }
                                    @if (serviceRequest.UserProfilePicture == "3" || serviceRequest.UserProfilePicture == null)
                                    {

                                        <img class="avatar" style="float: right;" src="~/assets/avatar-hat.png">
                                    }
                                    @if (serviceRequest.UserProfilePicture == "4")
                                    {

                                        <img class="avatar" style="float: right;" src="~/assets/avatar-iron.png">
                                    }
                                    @if (serviceRequest.UserProfilePicture == "5")
                                    {

                                        <img class="avatar" style="float: right;" src="~/assets/avatar-male.png">
                                    }
                                    @if (serviceRequest.UserProfilePicture == "6")
                                    {

                                        <img class="avatar" style="float: right;" src="~/assets/avatar-ship.png">
                                    }
                                </div>
                                <div class="col-auto cap-3">
                                    @serviceRequest.ServiceProviderName
                                    <br>
                                    @{
                                        int totalstars = Convert.ToInt32(serviceRequest.ratings);
                                        int stars = 5 - totalstars;
                                        for (int i = 1; i <= totalstars; i++)
                                        {
                                            <img src="~/assets/yellow-small-star.png" alt="">
                                        }
                                        for (int j = 1; j <= stars; j++)
                                        {

                                            <img src="~/assets/star2.png" alt="">
                                        }
                                        @totalstars
                                    }
                                </div>
                            }
                        </div>



                        <!-- David Bough
                        <ul class="serviceprovider">
                            <li class="address">Musterstrabe 5,12345 bonn</li>
                        </ul> -->
                    </td>
                    <td class="amount">€@serviceRequest.TotalCost</td>

                    <td class="status">
                        @if (serviceRequest.Status == 1)
                        {
                            <p class="statustextnew">
                                New
                            </p>
                        }
                        @if (serviceRequest.Status == 2)
                        {
                            <p class="statustextpending">
                                pending
                            </p>
                        }
                        @if (serviceRequest.Status == 3)
                        {
                            <p class="statustextcomp">
                                completed
                            </p>
                        }
                        @if (serviceRequest.Status == 4)
                        {
                            <p class="statustext">
                                cancelled
                            </p>
                        }
                        @if (serviceRequest.Status == 5)
                        {
                            <p class="statustext">
                                Rescheduled
                            </p>
                        }
                        @if (serviceRequest.Status == 6)
                        {
                            <p class="statustext">
                                Refunded
                            </p>
                        }
                        @if (serviceRequest.Status == 7)
                        {
                            <p class="statustext">
                                Change sP
                            </p>
                        }
                        @if (serviceRequest.Status == 8)
                        {
                            <p class="statustextexpired">
                                Expired
                            </p>
                        }
                    </td>
                    <td class="actions dropdown">
                        <a data-bs-toggle="dropdown" href="#">
                            <img src="~/assets/group-38.png" alt="">
                        </a>
                        <ul class="dropdown-menu">
                            @*@if (serviceRequest.Status != 3|| serviceRequest.Status != 4)*@
                            @if (serviceRequest.Status != 3)
                            {
                                <li><a class="dropdown-item" data-id="@serviceRequest.ServiceRequestId" data-prompt="1" onclick="openmodal(this)">Edit & Reschedule</a></li>

                                <li>
                                    <a class="dropdown-item" data-ajax="true"
                                       data-ajax-mode="replace"
                                       data-ajax-failure="notfound"
                                       data-ajax-update="#servreqtable"
                                       asp-route-id="@serviceRequest.ServiceRequestId"
                                       asp-action="CancelRequest"
                                       asp-controller="Admin">cancel SR by Customer</a>
                                </li>
                            }
                            <li><a class="dropdown-item" href="#">Inquiry</a></li>
                            <li><a class="dropdown-item" href="#">History Log</a></li>
                            <li><a class="dropdown-item" href="#">Download Invoice</a></li>
                            <li><a class="dropdown-item" href="#">Other Transactions</a></li>
                        </ul>
                    </td>

                </tr>


            }
        </tbody>

    }

</table>
<div class="row bottom">

    <div class="col-auto ">
        show
        <select class="form-control entry" onchange="hischangepagesize()" id="hisquantity">
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="15">15</option>
        </select>
        Entries total record: @Model.TotalItems

    </div>
    @*<div class="col-auto">
            <p>
                show
                <input type="number" id="quantity" name="quantity" min="1" max="5">
                Entries
            </p>
        </div>*@
    <div class="end col-auto">
        <cs-pager cs-paging-pagenumber="@Model.PageNumber"
                  cs-paging-totalitems="@Model.TotalItems"
                  cs-paging-pagesize="@Model.PageSize"
                  cs-pagenumber-param="pagenumber"
                  asp-controller="Admin"
                  asp-action="ServiceRequestPage"
                  cs-ajax-target="#servreqtable"></cs-pager>
    </div>
    @*<div class="end col-auto">

            <div class="pagination">
                <a href="#"><img src="~/assets/first-page.png" alt=""></a>
                <a href="#"><img src="~/assets/keyboard-right-arrow-button-copy.png" alt=""></a>
                <a href="#" class="active">1</a>
                <a href="#"><img src="~/assets/keyboard-left-arrow-button-copy.png" alt=""></a>
                <a href="#"><img src="~/assets/last-page.png" alt=""></a>
            </div>
        </div>*@
</div>